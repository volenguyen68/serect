"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}console.clear();var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setClearColor(16733525),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),camera.position.z=1;var controls=new THREE.TrackballControls(camera,renderer.domElement);controls.noPan=!0,controls.maxDistance=3,controls.minDistance=.7;var group=new THREE.Group;scene.add(group);var heart=null,sampler=null,originHeart=null;(new THREE.OBJLoader).load("https://assets.codepen.io/127738/heart_2.obj",function(e){(heart=e.children[0]).geometry.rotateX(.5*-Math.PI),heart.geometry.scale(.04,.04,.04),heart.geometry.translate(0,-.4,0),group.add(heart),heart.material=new THREE.MeshBasicMaterial({color:16733525}),originHeart=Array.from(heart.geometry.attributes.position.array),sampler=new THREE.MeshSurfaceSampler(heart).build(),init(),renderer.setAnimationLoop(render)});var positions=[],geometry=new THREE.BufferGeometry,material=new THREE.LineBasicMaterial({color:16777215}),lines=new THREE.LineSegments(geometry,material);group.add(lines);var simplex=new SimplexNoise,pos=new THREE.Vector3,Grass=function(){function e(){_classCallCheck(this,e),sampler.sample(pos),this.pos=pos.clone(),this.scale=.01*Math.random()+.001,this.one=null,this.two=null}return _createClass(e,[{key:"update",value:function(e){var r=simplex.noise4D(1.5*this.pos.x,1.5*this.pos.y,1.5*this.pos.z,5e-4*e)+1;this.one=this.pos.clone().multiplyScalar(1.01+.15*r*beat.a),this.two=this.one.clone().add(this.one.clone().setLength(this.scale))}}]),e}(),spikes=[];function init(e){positions=[];for(var r=0;r<2e4;r++){var t=new Grass;spikes.push(t)}}var beat={a:0};function render(r){positions=[],spikes.forEach(function(e){e.update(r),positions.push(e.one.x,e.one.y,e.one.z),positions.push(e.two.x,e.two.y,e.two.z)}),geometry.setAttribute("position",new THREE.BufferAttribute(new Float32Array(positions),3));for(var e=heart.geometry.attributes.position.array,t=0;t<e.length;t+=3){var n=new THREE.Vector3(originHeart[t],originHeart[t+1],originHeart[t+2]),o=simplex.noise4D(1.5*originHeart[t],1.5*originHeart[t+1],1.5*originHeart[t+2],5e-4*r)+1;n.multiplyScalar(1+.15*o*beat.a),e[t]=n.x,e[t+1]=n.y,e[t+2]=n.z}heart.geometry.attributes.position.needsUpdate=!0,controls.update(),renderer.render(scene,camera)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}gsap.timeline({repeat:-1,repeatDelay:.3}).to(beat,{a:1.2,duration:.6,ease:"power2.in"}).to(beat,{a:0,duration:.6,ease:"power3.out"}),gsap.to(group.rotation,{y:2*Math.PI,duration:12,ease:"none",repeat:-1}),window.addEventListener("resize",onWindowResize,!1);
//# sourceMappingURL=jave.min.js.map
